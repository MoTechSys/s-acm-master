# 🔄 تدفقات العمليات

> آخر تحديث: 2026-01-30

---

## 1. تدفق المصادقة

### تسجيل الدخول

```
┌─────────────────┐
│  صفحة الدخول   │
│  (Login)       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ إدخال البريد   │
│ وكلمة المرور   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐     لا      ┌─────────────────┐
│ هل الحساب مفعّل؟│────────────►│ صفحة التفعيل   │
└────────┬────────┘             │ (4 خطوات)      │
         │ نعم                  └─────────────────┘
         ▼
┌─────────────────┐
│ التحقق من      │
│ البيانات       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ جلب صلاحيات   │
│ الدور         │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ لوحة التحكم   │
│ (حسب الصلاحيات)│
└─────────────────┘
```

### تفعيل الحساب

```
الخطوة 1                الخطوة 2              الخطوة 3              الخطوة 4
┌──────────────┐       ┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│ إدخال البريد │──────►│ إدخال OTP   │─────►│ إنشاء كلمة  │─────►│ تأكيد       │
│ الإلكتروني   │       │              │      │ مرور جديدة  │      │ التفعيل     │
└──────────────┘       └──────────────┘      └──────────────┘      └──────────────┘
```

### استعادة كلمة المرور

```
نسيت كلمة المرور ──► إدخال البريد ──► إرسال OTP ──► التحقق ──► كلمة مرور جديدة ──► تسجيل الدخول
```

---

## 2. تدفق إدارة المستخدمين

### إضافة مستخدم

```
صفحة المستخدمين
         │
         ▼
┌─────────────────┐
│ زر "إضافة      │
│ مستخدم"        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ نموذج الإضافة: │
│ - الاسم        │
│ - البريد       │
│ - الدور        │
│ - الكلية/القسم │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ حفظ            │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ إرسال رابط    │
│ التفعيل        │
└─────────────────┘
```

### تعديل مستخدم

```
صفحة المستخدمين ──► زر "تعديل" ──► نموذج التعديل ──► حفظ التغييرات
```

### حذف مستخدم

```
صفحة المستخدمين ──► زر "حذف" ──► تأكيد الحذف ──► نقل لسلة المحذوفات
```

---

## 3. تدفق إدارة الأدوار

### إنشاء دور جديد

```
صفحة الأدوار
         │
         ▼
┌─────────────────┐
│ زر "إضافة دور" │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ إدخال اسم     │
│ الدور والوصف  │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│ اختيار الصلاحيات (Accordion متداخل)    │
│                                         │
│ 📁 إدارة المستخدمين [☑️ تحديد الكل]    │
│    ☑️ عرض المستخدمين                   │
│       ├── ☐ عرض التفاصيل              │
│       └── ☐ تصدير                      │
│    ☐ إضافة مستخدم                      │
│    ☐ تعديل مستخدم                      │
│    ☐ حذف مستخدم                        │
│                                         │
│ 📁 إدارة الملفات [☐ تحديد الكل]        │
│    ...                                  │
└────────────────────┬────────────────────┘
                     │
                     ▼
              ┌──────────────┐
              │ حفظ الدور   │
              └──────────────┘
```

### تعديل صلاحيات دور

```
صفحة الأدوار
         │
         ▼
زر "تعديل" على الدور
         │
         ▼
تعديل الصلاحيات
         │
         ▼
حفظ التغييرات
         │
         ▼
تحديث صلاحيات المستخدمين المرتبطين تلقائياً
```

---

## 4. تدفق إدارة المقررات

### إضافة مقرر

```
صفحة المقررات ──► زر "إضافة مقرر" ──► نموذج الإضافة ──► حفظ
                                              │
                                              ▼
                                     ┌─────────────────┐
                                     │ البيانات:      │
                                     │ - اسم المقرر   │
                                     │ - الرمز        │
                                     │ - الكلية       │
                                     │ - القسم        │
                                     │ - المستوى      │
                                     │ - الفصل        │
                                     └─────────────────┘
```

### تعيين مدرس

```
تفاصيل المقرر ──► زر "تعيين مدرس" ──► اختيار المدرس ──► حفظ
```

---

## 5. تدفق إدارة الملفات

### رفع ملف

```
صفحة الملفات أو تفاصيل المقرر
         │
         ▼
┌─────────────────┐
│ زر "رفع ملف"  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ اختيار الملف  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ إدخال البيانات:│
│ - العنوان      │
│ - الوصف        │
│ - المقرر       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ رفع الملف     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐     نعم     ┌─────────────────┐
│ يتطلب موافقة؟ │────────────►│ في انتظار      │
└────────┬────────┘             │ الموافقة       │
         │ لا                   └─────────────────┘
         ▼
┌─────────────────┐
│ الملف متاح    │
└─────────────────┘
```

### الموافقة على ملف

```
صفحة الملفات (قسم المعلقة) ──► زر "موافقة" أو "رفض" ──► تحديث الحالة
```

---

## 6. تدفق الذكاء الاصطناعي

### التلخيص

```
صفحة AI أو عارض الملف
         │
         ▼
زر "تلخيص"
         │
         ▼
إرسال الملف للـ AI
         │
         ▼
عرض الملخص
         │
         ▼
خيار الحفظ/النسخ
```

### توليد الأسئلة

```
صفحة AI أو عارض الملف
         │
         ▼
زر "توليد أسئلة"
         │
         ▼
┌─────────────────┐
│ اختيار النوع: │
│ ○ اختيار متعدد │
│ ○ صح/خطأ      │
│ ○ مقالية      │
└────────┬────────┘
         │
         ▼
إرسال للـ AI
         │
         ▼
عرض الأسئلة
         │
         ▼
خيار التصدير
```

### اسأل المستند

```
عارض الملف ──► زر "اسأل المستند" ──► إدخال السؤال ──► إرسال للـ AI ──► عرض الإجابة
```

---

## 7. تدفق الإشعارات

### إرسال إشعار

```
صفحة الإشعارات
         │
         ▼
زر "إرسال إشعار"
         │
         ▼
┌─────────────────┐
│ اختيار المستلمين│
│ ○ الكل         │
│ ○ دور معين    │
│ ○ مستخدم معين │
└────────┬────────┘
         │
         ▼
كتابة الإشعار
         │
         ▼
إرسال
```

---

## 8. تدفق سلة المحذوفات

### استعادة عنصر

```
سلة المحذوفات ──► زر "استعادة" ──► تأكيد ──► نقل للموقع الأصلي
```

### حذف نهائي

```
سلة المحذوفات ──► زر "حذف نهائي" ──► تأكيد ──► حذف من قاعدة البيانات
```

---

## 9. تدفق التقارير

```
صفحة التقارير
         │
         ▼
┌─────────────────┐
│ اختيار النوع: │
│ - المستخدمين   │
│ - الملفات      │
│ - المقررات     │
│ - النشاط       │
└────────┬────────┘
         │
         ▼
تحديد الفترة الزمنية
         │
         ▼
تحديد الفلاتر
         │
         ▼
عرض التقرير
         │
         ▼
┌─────────────────┐
│ خيارات التصدير:│
│ [PDF] [Excel]  │
└─────────────────┘
```

---

## 10. تدفق سجلات التدقيق

```
صفحة سجلات التدقيق
         │
         ▼
عرض السجلات
         │
         ▼
┌─────────────────┐
│ الفلترة:       │
│ - المستخدم     │
│ - العملية      │
│ - التاريخ      │
└────────┬────────┘
         │
         ▼
البحث
         │
         ▼
خيار التصدير
```
